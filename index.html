<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cotizador Electricidad Vitt PRO 2.0</title>

<style>
:root{
--bg:#0b1220;
--card:#16213a;
--accent:#4da3ff;
--ok:#00e676;
--danger:#ff5252;
--text:#ffffff;
--muted:#94a3b8;
}

body{
margin:0;
padding:20px;
background:linear-gradient(180deg,#0b1220,#111a2e);
font-family:Arial;
color:var(--text);
}

.container{max-width:1000px;margin:auto;}

h1{margin:0;font-size:20px;}
.subtitle{font-size:12px;color:var(--muted);margin-bottom:15px;}

.section-menu{
display:flex;
gap:8px;
flex-wrap:wrap;
margin-bottom:15px;
}

.section-btn{
padding:8px 12px;
border-radius:8px;
background:#1b2945;
cursor:pointer;
font-size:13px;
}

.section-btn.active{
background:var(--accent);
color:black;
font-weight:bold;
}

.card{
background:var(--card);
padding:15px;
border-radius:12px;
margin-bottom:15px;
}

label{font-size:12px;color:var(--muted);}

input,select{
width:100%;
padding:8px;
border-radius:8px;
border:none;
background:#1b2945;
color:white;
margin-top:4px;
}

button{
padding:8px 10px;
border-radius:8px;
border:none;
cursor:pointer;
font-weight:bold;
}

.btn{background:var(--accent);color:black;}
.btn-ok{background:var(--ok);color:black;}
.btn-danger{background:var(--danger);color:white;}

.work-item{
background:#1b2945;
padding:10px;
border-radius:8px;
margin-bottom:8px;
}

.row{display:flex;gap:8px;flex-wrap:wrap;}
.col{flex:1;min-width:140px;}

.total{
font-size:22px;
font-weight:bold;
text-align:right;
margin-top:10px;
color:var(--ok);
}
</style>
</head>

<body>
<div class="container">

<h1>⚡ Cotizador Electricidad Vitt PRO 2.0</h1>
<div class="subtitle">Soluciones Eléctricas</div>

<div class="section-menu" id="sectionMenu"></div>

<div class="card">
<label>Servicio</label>
<select id="servicios"></select>
<div class="row" style="margin-top:10px;">
<div class="col">
<label>Cantidad</label>
<input type="number" id="cantidad" value="1" min="1">
</div>
<div class="col">
<label>Precio ($ editable)</label>
<input type="number" id="precio">
</div>
<div class="col">
<button class="btn" onclick="agregar()">Agregar</button>
</div>
</div>
</div>

<div class="card">
<h3>Trabajos agregados</h3>
<div id="lista"></div>
<button class="btn-danger" onclick="limpiar()">Vaciar</button>
</div>

<div class="card">
<h3>Extras</h3>
<div class="row">
<div class="col">
<label>Materiales</label>
<input type="number" id="materiales" value="0">
</div>
<div class="col">
<label>Adicionales</label>
<input type="number" id="adicionales" value="0">
</div>
<div class="col">
<label>Margen %</label>
<input type="number" id="margen" value="0">
</div>
<div class="col">
<label>IVA 21%</label>
<input type="checkbox" id="iva">
</div>
</div>
<div class="total">Total: $ <span id="total">0</span></div>
</div>

<div class="card">
<button class="btn-ok" onclick="copiar()">Copiar WhatsApp</button>
<button class="btn" onclick="window.print()">PDF</button>
</div>

</div>

<script>

const DATA={
"Inspección":[
{n:"Visita técnica",p:45324},
{n:"Urgencia",p:108660}
],
"Iluminación":[
{n:"Aplique",p:24798},
{n:"Spot LED",p:24798},
{n:"Ventilador techo",p:90490}
],
"Cableado":[
{n:"Boca completa",p:90490},
{n:"Cableado por metro",p:12442}
],
"Tableros":[
{n:"TP Monofásico + PAT",p:267314},
{n:"TP Trifásico + PAT",p:361993}
],
"Instalaciones":[
{n:"Pilar completo",p:746466},
{n:"Gabinete medidor",p:189986}
],
"Seguridad":[
{n:"Instalación cámara IP interior",p:48000},
{n:"Instalación cámara exterior altura",p:62000},
{n:"Instalación DVR/NVR",p:85000},
{n:"Configuración monitoreo celular",p:35000},
{n:"Sistema alarma básica instalada",p:180000},
{n:"Sensor adicional alarma",p:18000},
{n:"Central alarma instalada",p:95000}
]
};

let currentSection=Object.keys(DATA)[0];
let items=[];

const sectionMenu=document.getElementById("sectionMenu");
const servicios=document.getElementById("servicios");

function cargarSecciones(){
sectionMenu.innerHTML="";
Object.keys(DATA).forEach(sec=>{
let btn=document.createElement("div");
btn.textContent=sec;
btn.className="section-btn"+(sec===currentSection?" active":"");
btn.onclick=()=>{
currentSection=sec;
cargarSecciones();
cargarServicios();
};
sectionMenu.appendChild(btn);
});
}

function cargarServicios(){
servicios.innerHTML="";
DATA[currentSection].forEach((s,i)=>{
let opt=document.createElement("option");
opt.value=i;
opt.textContent=s.n;
servicios.appendChild(opt);
});
precio.value=DATA[currentSection][0].p;
}

servicios.onchange=()=>{
let i=servicios.value;
precio.value=DATA[currentSection][i].p;
};

function agregar(){
let i=servicios.value;
let nombre=DATA[currentSection][i].n;
let precioVal=parseFloat(precio.value)||0;
let cant=parseInt(cantidad.value)||1;
items.push({nombre,precio:precioVal,cant});
render();
}

function eliminar(i){
items.splice(i,1);
render();
}

function limpiar(){
items=[];
render();
}

function render(){
let div=document.getElementById("lista");
div.innerHTML="";
items.forEach((it,i)=>{
let w=document.createElement("div");
w.className="work-item";
w.innerHTML=`
<b>${it.nombre}</b><br>
$${it.precio} x ${it.cant}
<button class="btn-danger" onclick="eliminar(${i})">Eliminar</button>
`;
div.appendChild(w);
});
calcular();
}

function calcular(){
let subtotal=0;
items.forEach(it=>subtotal+=it.precio*it.cant);
let mat=parseFloat(materiales.value)||0;
let add=parseFloat(adicionales.value)||0;
let mar=parseFloat(margen.value)||0;
let total=subtotal+mat+add;
total+=total*(mar/100);
if(iva.checked) total*=1.21;
totalEl.textContent=total.toLocaleString();
}

function copiar(){
let texto="⚡ Cotizador Electricidad Vitt PRO 2.0\nSoluciones Eléctricas\n\n";
items.forEach(it=>{
texto+=`${it.nombre} x${it.cant} - $${(it.precio*it.cant).toLocaleString()}\n`;
});
texto+=`\nTOTAL: $${totalEl.textContent}`;
navigator.clipboard.writeText(texto);
alert("Copiado");
}

const totalEl=document.getElementById("total");

cargarSecciones();
cargarServicios();
render();

</script>

</body>
</html>
