<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<title>Cotizador Electricidad Vitt PRO 3.7</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
/* ====== PALETA + 3D ====== */
:root{
  --bg:#070c14;
  --bg2:#0b1220;
  --panel:#0f1a2b;
  --panel2:#14233d;
  --stroke:rgba(255,255,255,.08);
  --text:#f1f5f9;
  --muted:#a3b2cc;
  --accent:#4fd1ff;
  --ok:#2ce6a2;
  --danger:#ff5b5b;
  --radius:18px;
  --shadow:0 18px 40px rgba(0,0,0,.55);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Inter',system-ui,sans-serif;
  background:
    radial-gradient(900px 500px at 50% -80px, rgba(79,209,255,.18), transparent 60%),
    radial-gradient(700px 400px at 10% 20%, rgba(44,230,162,.10), transparent 55%),
    linear-gradient(180deg,var(--bg),var(--bg2));
  color:var(--text);
}

.app{
  max-width:520px;
  margin:0 auto;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* ====== TOP ====== */
.topbar{
  position:sticky; top:0; z-index:10;
  padding:14px;
  background:linear-gradient(180deg, rgba(7,12,20,.96), rgba(7,12,20,.75));
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--stroke);
}
.topbar h1{
  margin:0;
  font-size:16px;
  font-weight:800;
}
.topbar .sub{
  font-size:12px;
  color:var(--muted);
}

/* ====== SCREENS ====== */
.screen{padding:14px}
.hidden{display:none}

/* ====== GRID ====== */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.section{
  background:linear-gradient(180deg,var(--panel2),var(--panel));
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:var(--shadow);
  cursor:pointer;
}
.section b{font-size:13px}

/* ====== CARD ====== */
.card{
  background:linear-gradient(180deg,var(--panel2),var(--panel));
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:14px;
  margin-bottom:12px;
  box-shadow:var(--shadow);
}
.small{font-size:12px;color:var(--muted)}

input{
  width:90px;
  padding:8px;
  border-radius:12px;
  border:1px solid var(--stroke);
  background:#070c14;
  color:var(--text);
  text-align:center;
}

button{
  border:none;
  border-radius:14px;
  padding:10px 14px;
  font-weight:800;
  cursor:pointer;
}
.btn{background:linear-gradient(180deg,#6be3ff,var(--accent));color:#031018}
.btnOk{background:linear-gradient(180deg,#6fffd3,var(--ok));color:#04130c}
.btnDanger{background:linear-gradient(180deg,#ff7b7b,var(--danger));color:#180707}

/* ====== BOTTOM ====== */
.bottom{
  position:sticky; bottom:0;
  padding:14px;
  background:linear-gradient(180deg, rgba(7,12,20,.2), rgba(7,12,20,.95));
  border-top:1px solid var(--stroke);
}
.total{
  font-size:20px;
  font-weight:900;
  color:var(--ok);
}

/* ====== PRINT ====== */
@media print{
  .topbar,.bottom{display:none}
  body{background:white;color:black}
  .print-header{display:block}
}
.print-header{
  display:none;
  border-bottom:2px solid #000;
  padding-bottom:10px;
  margin-bottom:20px;
}
</style>
</head>

<body>

<div class="print-header">
  <strong>⚡ Vitt PRO</strong><br>
  Cotizador eléctrico profesional<br>
  Fecha: <script>document.write(new Date().toLocaleDateString())</script>
</div>

<div class="app">

  <div class="topbar">
    <h1>Vitt PRO</h1>
    <div class="sub">Cotizador eléctrico profesional</div>
  </div>

  <!-- HOME -->
  <div id="home" class="screen">
    <div class="grid" id="sections"></div>
  </div>

  <!-- SERVICES -->
  <div id="services" class="screen hidden">
    <button class="btn" onclick="volver()">← Volver</button>
    <h3 id="title"></h3>
    <div id="list"></div>
  </div>

  <!-- BUDGET -->
  <div id="budget" class="screen hidden">
    <button class="btn" onclick="volverHome()">← Inicio</button>
    <div id="budgetList"></div>
    <div class="card">
      Materiales <input type="number" id="materiales" value="0"><br><br>
      Adicionales <input type="number" id="adicionales" value="0"><br><br>
      Margen % <input type="number" id="margen" value="0"><br><br>
      IVA <input type="checkbox" id="iva">
      <div class="total">$ <span id="total">0</span></div>
    </div>
    <button class="btnOk" onclick="copiar()">Copiar WhatsApp</button>
    <button class="btn" onclick="window.print()">PDF</button>
  </div>

  <div class="bottom" id="bottom" style="display:none">
    <button class="btnOk" onclick="verPresupuesto()">Ver presupuesto (<span id="count">0</span>)</button>
  </div>

</div>

<script>
const DATA={
  "Inspección":[{n:"Visita técnica",p:45000},{n:"Diagnóstico",p:60000}],
  "Iluminación":[{n:"Plafón LED",p:32000},{n:"Spot LED",p:25000}],
  "Tableros":[{n:"Tablero monofásico",p:260000},{n:"Cambio térmica",p:38000}]
};

let items=[];

function render(){
  const s=document.getElementById("sections");
  s.innerHTML="";
  Object.keys(DATA).forEach(k=>{
    const d=document.createElement("div");
    d.className="section";
    d.innerHTML="<b>"+k+"</b><div class='small'>"+DATA[k].length+" servicios</div>";
    d.onclick=()=>open(k);
    s.appendChild(d);
  });
}

function open(k){
  home.classList.add("hidden");
  services.classList.remove("hidden");
  title.textContent=k;
  list.innerHTML="";
  DATA[k].forEach(s=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<b>${s.n}</b><br><br>
      Precio <input type="number" value="${s.p}"><br><br>
      <button class="btn" onclick="add('${s.n}',${s.p})">Agregar</button>`;
    list.appendChild(c);
  });
}

function add(n,p){
  items.push({n,p});
  bottom.style.display="block";
  count.textContent=items.length;
}

function volver(){
  services.classList.add("hidden");
  home.classList.remove("hidden");
}

function verPresupuesto(){
  home.classList.add("hidden");
  services.classList.add("hidden");
  budget.classList.remove("hidden");
  renderBudget();
}

function volverHome(){
  budget.classList.add("hidden");
  home.classList.remove("hidden");
}

function renderBudget(){
  budgetList.innerHTML="";
  let t=0;
  items.forEach(it=>{
    t+=it.p;
    budgetList.innerHTML+=`<div class="card">${it.n} - $${it.p}</div>`;
  });
  total.textContent=t;
}

function copiar(){
  let txt="Vitt PRO\n\n";
  items.forEach(i=>txt+=i.n+" $"+i.p+"\n");
  txt+="\nTOTAL $"+total.textContent;
  navigator.clipboard.writeText(txt);
  alert("Copiado");
}

render();
</script>

</body>
</html>
